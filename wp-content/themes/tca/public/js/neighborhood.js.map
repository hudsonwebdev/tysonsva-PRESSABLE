{"version":3,"file":"js/neighborhood.js","mappings":"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","sources":["webpack://tca/./src/js/neighborhood.js"],"sourcesContent":["jQuery(document).ready(function($){\n\n\tconst url = window.location.href;\n\n\tfunction getLastPartOfUrl(url) {\n\t\t\n\t\tconst urlParts = url.split('/');   // Split the URL by \"/\"\n\t\t\n\t\t// Get the last part of the URL, ignoring any trailing slash\n\t\tlet lastPart = urlParts[urlParts.length - 1];\n\t\t\n\t\t// If the last part is empty (indicating a trailing slash), get the second-to-last part\n\t\tif (lastPart === '') {\n\t\t\tlastPart = urlParts[urlParts.length - 2];\n\t\t}\n\t\n\t\treturn lastPart;  // Return the last part or the final slug\n\t}\n\t\n\t\n\n\t  var currenturl =  getLastPartOfUrl(url);\n\n\n\t $('#neighborhoodSelect option').each(function() {\n\n\t\tvar optionurl =getLastPartOfUrl( $(this).val());\n\n\n\n\n\t\t if (optionurl == currenturl) {\n\t\t\t\n\t\t\t $(this).prop('selected', true);\n\n\t\t }\n\n\t });\n\n\n\t\n\t // Submit the form when the selection changes\n\t $('#neighborhoodSelect').change(function() {\n\t\t var selectedValue = $(this).val(); // Get the selected option value\n\t\t $('#neighborhoodForm').attr('action', selectedValue); // Update the form action to the selected value\n\t\t $('#neighborhoodForm').submit(); // Submit the form to the selected URL\n\t });\n\n\n\n\n\t\n\n\tif($('#neighborhood-map').length){\n\t\tvar activeid = '';\n\n        var initialDesktop = [-77.227,38.926];\n\t\tvar initialMobile = [-77.227,38.94];\n\n        mapboxgl.accessToken = 'pk.eyJ1IjoidGNhc29mdHdhcmUiLCJhIjoiY2xzdWd6MHVpMTFxajJ2cjA4cnh6cmZ5cCJ9.e9dAUpCID8DqXU5WD0QOxw';\n\t\tvar map = new mapboxgl.Map({\n\t\tcontainer: 'neighborhood-map', // container ID\n\t\tstyle: 'mapbox://styles/tcasoftware/cm7unqmeq01px01qo3jv83ql2', // style URL\n\t\tcenter: initialDesktop, // starting position [lng, lat]\n\t\tzoom: 13.3, // starting zoom\n\t\tdragPan: false\n\t\t});\n\n\t\tmap.scrollZoom.disable();\n\n\n\t\n\t\t$(window).smartresize(function () {\n\n\t\t\tif(document.documentElement.clientWidth>768){\n\t\t\t\n\t\t\t\tmap.flyTo({\n\t\t\t\tcenter:  initialDesktop,\n\t\t\t\tzoom: 13.2\n\t\t\t\t});\n\t\n\t\t\t}else{\n\t\n\t\t\t  map.flyTo({\n\t\t\t\tcenter: initialMobile,\n\t\t\t\tzoom: 12.3\n\t\t\t\t});\n\t\n\t\t\t}\n\t\t});\n\n\n\t\t\t\t\n\t\tif(document.documentElement.clientWidth>768){\n\n\t\t\tmap.flyTo({\n\t\t\tcenter:  initialDesktop,\n\t\t\tzoom: 13.2\n\t\t\t});\n\n\t\t}else{\n\n\t\t  map.flyTo({\n\t\t\tcenter:  initialMobile,\n\t\t\tzoom: 12.3\n\t\t\t});\n\n\t\t}\n\n\t\tmap.on('load', function () {\n\n\n\t\t\n\n\n\t\t\tvar layers = map.getStyle().layers;\n\t\t\tvar firstSymbolId;\n\t\t\tfor (var i = 0; i < layers.length; i++) {\n\t\t\tif (layers[i].type === 'symbol') {\n\t\t\tfirstSymbolId = layers[i].id;\n\t\t\tbreak;\n\t\t\t}\n\n\t\t\t}\n\t\t\t\t\n\n\t\t\t$.getJSON('/wp-json/neighborhood/geojson', function( data ) {\n\n\t\t\tvar neighborhoodgeojson = JSON.parse(data);\n\n    \t\tstoreDZ = [];\n\n    \t\tvar count = 0;\t\n\n\t\t\t\n\n    \t\t\n    \t\tneighborhoodgeojson.features.forEach(function(shape) {\n\n\t\t\t        var thisid = shape.properties.id.toString();\n\t\t\t        \n\t\t\t        var opacity = 0;\n\n\t\t\n\n\t\t\t\n\n\t\t\t\n\n               \t\tif(shape.properties.slug==currenturl){\n               \t\t\tactiveid = thisid;\n               \t\t\topacity = 0;\n               \t\t}\n\n               \t\tcount++;\n\t\t\t\n\t\t\t       \n\n\t\t\t        storeDZ[thisid] = {\n\t\t\t                'id': thisid,\n\t\t\t                'type': 'fill',\n\t\t\t                'source': {'type': 'geojson',\n\t\t\t                          'data': {\n\t\t\t                            'properties': shape.properties,\n\t\t\t                            'type': 'Feature',\n\t\t\t                            'geometry': {\n\t\t\t                                'type': 'Polygon',\n\t\t\t                                'coordinates': shape.coords\n\t\t\t                            }\n\t\t\t                          },\n\t\t\t                      },\n\t\t\t                'layout': {},\n\t\t\t                'paint': {\n\t\t\t                    'fill-color': '#00B852',\n\t\t\t                    'fill-opacity': opacity,\n\t\t\t                }\n\t\t\t            } \n\t\t\t        \n\t\t\t        map.addLayer(storeDZ[thisid],firstSymbolId);\n\t\t\t\n\t\t\t        thisidline = thisid+'line';\n\t\t\t        storeDZ[thisidline] = {\n\t\t\t                'id': thisidline,\n\t\t\t                'type': 'line',\n\t\t\t                'source': {'type': 'geojson',\n\t\t\t                          'data': {\n\t\t\t                            'properties': shape.properties,\n\t\t\t                            'type': 'Feature',\n\t\t\t                            'geometry': {\n\t\t\t                                'type':  'Polygon',\n\t\t\t                                'coordinates': shape.coords\n\t\t\t                            }\n\t\t\t                          },\n\t\t\t                      },\n\t\t\t                'layout': {},\n\t\t\t                'paint': {\n\t\t\t                  'line-color': '#ffffff',//shape.properties.stroke,\n\t\t\t                  'line-width': 2,\n\t\t\t                  'line-dasharray': [1, 2],\n\t\t\t                }\n\t\t\t            } \n\n\t\t\t       \n\t\t\t        map.addLayer(storeDZ[thisidline],firstSymbolId);\n\t\t\t       \n\t\t\t          map.on('click', thisid, function (e) {\n\n\t\t\t\t\t\n\n\t\t\t\t\t\twindow.location.href = '/discover-tysons/neighborhood-guide/' + storeDZ[thisid].source.data.properties.slug;\n\n\n\t\t\t\t\t\t/*\n\t\t\t          \tactiveid = thisid;\n\n\t\t\t  \n\n\t\t\t     \t\tfor (var key in storeDZ) {\n               \n\t\t\t                if($.isNumeric(key)){\n\n\n\t\t\t                    var fillColor = storeDZ[key].paint['fill-color'];\n\n\n\t\t\t                    map.setPaintProperty(key, 'fill-opacity', 0);\n\t\t\t                   \n\t\t\t                }\n\t\t\t            \n\t\t\t            }\n\n\t\t\t            var fc = storeDZ[thisid].paint['fill-color']\n\n\t\t\t    \n\n\t\t\t            $('.neighborhood-cards').css('background-color',fc);\n\t\t\t     \t\t \n\t\t\t     \t\t map.setPaintProperty(thisid, 'fill-opacity', 0.8);\n\n\t\t\t     \t\n\t\t\t\t\t\t*/\n\t\t\t        });\n\n\n\t\t\t        map.on('mouseenter', thisid, function (e) {\n\n\t\t\t          \t\n\n\t\t\t     \t\t \n\t\t\t     \t\t map.setPaintProperty(thisid, 'fill-opacity', 0.8);\n\n\t\t\t        });\n\n\t\t\t        map.on('mouseleave', thisid, function (e) {\n\n\t\t\t          \t\n\t\t\t        \tif(thisid != activeid){\n\n\t\t\t        \t\tmap.setPaintProperty(thisid, 'fill-opacity', 0);\n\t\t\t        \t}\n\t\t\t     \t\t \n\t\t\t     \t\t \n\n\t\t\t        });\n\t\t\t       \n\t\t\t       \n\t\t\t    });\n\n\t\n\n\t\t});\n\n\t});\n\n\t}\n\n});\n\n"],"names":["jQuery","document","ready","$","url","window","location","href","getLastPartOfUrl","urlParts","split","lastPart","length","currenturl","each","optionurl","val","prop","change","selectedValue","attr","submit","activeid","initialDesktop","initialMobile","mapboxgl","accessToken","map","Map","container","style","center","zoom","dragPan","scrollZoom","disable","smartresize","documentElement","clientWidth","flyTo","on","layers","getStyle","firstSymbolId","i","type","id","getJSON","data","neighborhoodgeojson","JSON","parse","storeDZ","count","features","forEach","shape","thisid","properties","toString","opacity","slug","coords","addLayer","thisidline","e","source","setPaintProperty"],"sourceRoot":""}